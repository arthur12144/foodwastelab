<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Supplier Scorecard — Packaged Salads</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .gradient-bar {
      background: linear-gradient(to right, #4ade80, #fcd34d, #f87171);
    }
    .threshold-bar {
      position: relative;
    }
    .threshold-bar::after {
      content: '';
      position: absolute;
      left: var(--threshold-pos);
      top: -2px;
      bottom: -2px;
      width: 2px;
      background: #1e293b;
    }
  </style>
</head>
<body class="min-h-screen bg-slate-50 p-6">
  
  <!-- Header -->
  <div class="mb-6">
    <div class="flex items-center justify-between">
      <div>
        <div class="flex items-center gap-3 mb-1">
          <a href="#" class="text-slate-400 hover:text-slate-600 text-sm">← Back to Dashboard</a>
        </div>
        <h1 class="text-2xl font-semibold text-slate-800">Supplier Scorecard</h1>
        <p class="text-slate-500 text-sm mt-1">Packaged Salads · All Suppliers · Q4 2024</p>
      </div>
      <div class="text-right">
        <div class="text-xs text-slate-400 uppercase tracking-wide">Category Shrink Rate</div>
        <div class="text-2xl font-semibold text-red-600">14.2%</div>
        <div class="text-xs text-slate-400">vs 8% target</div>
      </div>
    </div>
  </div>

  <!-- Critical Thresholds Reference -->
  <div class="mb-6 bg-slate-800 rounded-xl p-4 text-white">
    <div class="text-xs uppercase tracking-wide text-slate-400 mb-3">Critical Thresholds</div>
    <div class="grid grid-cols-4 gap-6 text-sm">
      <div>
        <div class="text-slate-400">Delivered Shelf Life</div>
        <div class="font-semibold">≥ 7 days <span class="text-green-400">target</span></div>
        <div class="text-slate-400">< 5 days <span class="text-red-400">critical</span></div>
      </div>
      <div>
        <div class="text-slate-400">Shelf Life Variability</div>
        <div class="font-semibold">CV ≤ 0.15 <span class="text-green-400">target</span></div>
        <div class="text-slate-400">CV > 0.25 <span class="text-red-400">critical</span></div>
      </div>
      <div>
        <div class="text-slate-400">Fill Rate</div>
        <div class="font-semibold">≥ 97% <span class="text-green-400">target</span></div>
        <div class="text-slate-400">< 90% <span class="text-red-400">critical</span></div>
      </div>
      <div>
        <div class="text-slate-400">On-Time Delivery</div>
        <div class="font-semibold">≥ 95% <span class="text-green-400">target</span></div>
        <div class="text-slate-400">< 85% <span class="text-red-400">critical</span></div>
      </div>
    </div>
  </div>

  <!-- Portfolio Summary Cards -->
  <div class="grid grid-cols-4 gap-4 mb-6">
    <div class="bg-white rounded-xl p-5 shadow-sm border border-slate-100">
      <div class="text-xs text-slate-400 uppercase tracking-wide mb-1">Avg Delivered Shelf Life</div>
      <div class="text-3xl font-semibold text-amber-600">5.8 days</div>
      <div class="text-sm text-slate-500 mt-1">vs 7 day target</div>
      <div class="mt-3 flex items-center gap-2">
        <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
          <div class="h-full bg-amber-500 rounded-full" style="width: 83%"></div>
        </div>
        <span class="text-xs text-slate-500">83%</span>
      </div>
    </div>
    
    <div class="bg-white rounded-xl p-5 shadow-sm border border-slate-100">
      <div class="text-xs text-slate-400 uppercase tracking-wide mb-1">Shelf Life Variability</div>
      <div class="text-3xl font-semibold text-red-600">CV 0.28</div>
      <div class="text-sm text-slate-500 mt-1">vs 0.15 target</div>
      <div class="mt-3 flex items-center gap-2">
        <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
          <div class="h-full bg-red-500 rounded-full" style="width: 54%"></div>
        </div>
        <span class="text-xs text-slate-500">54%</span>
      </div>
    </div>
    
    <div class="bg-white rounded-xl p-5 shadow-sm border border-slate-100">
      <div class="text-xs text-slate-400 uppercase tracking-wide mb-1">Fill Rate</div>
      <div class="text-3xl font-semibold text-amber-600">94.1%</div>
      <div class="text-sm text-slate-500 mt-1">vs 97% target</div>
      <div class="mt-3 flex items-center gap-2">
        <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
          <div class="h-full bg-amber-500 rounded-full" style="width: 97%"></div>
        </div>
        <span class="text-xs text-slate-500">97%</span>
      </div>
    </div>
    
    <div class="bg-white rounded-xl p-5 shadow-sm border border-slate-100">
      <div class="text-xs text-slate-400 uppercase tracking-wide mb-1">On-Time Delivery</div>
      <div class="text-3xl font-semibold text-slate-800">91.2%</div>
      <div class="text-sm text-slate-500 mt-1">vs 95% target</div>
      <div class="mt-3 flex items-center gap-2">
        <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
          <div class="h-full bg-amber-500 rounded-full" style="width: 96%"></div>
        </div>
        <span class="text-xs text-slate-500">96%</span>
      </div>
    </div>
  </div>

  <!-- Regional Performance Table -->
  <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden mb-6">
    <div class="p-5 border-b border-slate-100">
      <h2 class="text-lg font-semibold text-slate-800">Regional Performance</h2>
      <p class="text-sm text-slate-500">Supplier metrics by distribution region · Sorted by opportunity</p>
    </div>
    
    <table class="w-full">
      <thead>
        <tr class="bg-slate-50 border-b border-slate-100">
          <th class="text-left text-xs font-medium text-slate-400 uppercase tracking-wide py-3 px-4">Region</th>
          <th class="text-center text-xs font-medium text-slate-400 uppercase tracking-wide py-3 px-3 border-l border-slate-200" colspan="3">Delivered Shelf Life</th>
          <th class="text-center text-xs font-medium text-slate-400 uppercase tracking-wide py-3 px-3 border-l border-slate-200" colspan="2">Fill Rate</th>
          <th class="text-center text-xs font-medium text-slate-400 uppercase tracking-wide py-3 px-3 border-l border-slate-200">Risk Score</th>
        </tr>
        <tr class="bg-slate-50 border-b border-slate-100 text-xs text-slate-400">
          <th></th>
          <th class="py-1 px-2 border-l border-slate-200">Mean</th>
          <th class="py-1 px-2">CV</th>
          <th class="py-1 px-2">% Below 5d</th>
          <th class="py-1 px-2 border-l border-slate-200">Mean</th>
          <th class="py-1 px-2">% Below 90%</th>
          <th class="py-1 px-2 border-l border-slate-200"></th>
        </tr>
      </thead>
      <tbody id="regionTable">
        <!-- Populated by JS -->
      </tbody>
    </table>
  </div>

  <!-- Threshold Violation Detail -->
  <div class="grid grid-cols-2 gap-6 mb-6">
    
    <!-- Shelf Life Distribution -->
    <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-5">
      <h3 class="text-lg font-semibold text-slate-800 mb-1">Delivered Shelf Life Distribution</h3>
      <p class="text-sm text-slate-500 mb-4">All regions combined · Last 90 days</p>
      
      <div class="space-y-2" id="shelfLifeDistribution">
        <!-- Populated by JS -->
      </div>
      
      <div class="mt-4 pt-4 border-t border-slate-100 grid grid-cols-3 gap-4 text-center">
        <div>
          <div class="text-2xl font-semibold text-red-600">18%</div>
          <div class="text-xs text-slate-500">Below Critical (5d)</div>
        </div>
        <div>
          <div class="text-2xl font-semibold text-amber-600">34%</div>
          <div class="text-xs text-slate-500">Below Target (7d)</div>
        </div>
        <div>
          <div class="text-2xl font-semibold text-green-600">48%</div>
          <div class="text-xs text-slate-500">At or Above Target</div>
        </div>
      </div>
    </div>
    
    <!-- Fill Rate Distribution -->
    <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-5">
      <h3 class="text-lg font-semibold text-slate-800 mb-1">Fill Rate Distribution</h3>
      <p class="text-sm text-slate-500 mb-4">Order-level fill rate · Last 90 days</p>
      
      <div class="space-y-2" id="fillRateDistribution">
        <!-- Populated by JS -->
      </div>
      
      <div class="mt-4 pt-4 border-t border-slate-100 grid grid-cols-3 gap-4 text-center">
        <div>
          <div class="text-2xl font-semibold text-red-600">8%</div>
          <div class="text-xs text-slate-500">Below Critical (90%)</div>
        </div>
        <div>
          <div class="text-2xl font-semibold text-amber-600">22%</div>
          <div class="text-xs text-slate-500">Below Target (97%)</div>
        </div>
        <div>
          <div class="text-2xl font-semibold text-green-600">70%</div>
          <div class="text-xs text-slate-500">At or Above Target</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Diagnosis and Recommendations -->
  <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-6 mb-6">
    <h3 class="text-lg font-semibold text-slate-800 mb-4">Diagnosis & Recommended Actions</h3>
    
    <div class="space-y-4">
      <div class="flex gap-4 p-4 bg-red-50 rounded-lg border border-red-100">
        <div class="flex-shrink-0 w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white font-bold text-sm">1</div>
        <div class="flex-1">
          <div class="font-semibold text-slate-800">Southeast & Florida: Critical shelf life deficit</div>
          <p class="text-sm text-slate-600 mt-1">
            Averaging 4.2–4.8 days delivered shelf life with 28–35% of shipments below critical threshold. 
            High variability (CV 0.32–0.38) suggests inconsistent cold chain or supplier mix issues.
          </p>
          <div class="mt-2 text-sm font-medium text-red-700">
            → Immediate supplier quality audit; consider alternate sourcing for these regions
          </div>
        </div>
      </div>
      
      <div class="flex gap-4 p-4 bg-amber-50 rounded-lg border border-amber-100">
        <div class="flex-shrink-0 w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-white font-bold text-sm">2</div>
        <div class="flex-1">
          <div class="font-semibold text-slate-800">Southwest: Fill rate instability</div>
          <p class="text-sm text-slate-600 mt-1">
            18% of orders falling below 90% fill rate despite adequate mean (93.2%). 
            Indicates capacity constraints on high-demand days or allocation issues.
          </p>
          <div class="mt-2 text-sm font-medium text-amber-700">
            → Review order patterns for demand spikes; negotiate capacity guarantees with suppliers
          </div>
        </div>
      </div>
      
      <div class="flex gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200">
        <div class="flex-shrink-0 w-8 h-8 bg-slate-500 rounded-full flex items-center justify-center text-white font-bold text-sm">3</div>
        <div class="flex-1">
          <div class="font-semibold text-slate-800">Network-wide: Variability exceeds targets</div>
          <p class="text-sm text-slate-600 mt-1">
            Even best-performing regions (Pacific Northwest, Mountain) show CV of 0.18–0.21, above the 0.15 target.
            Suggests systemic supply chain variability that compounds at store level.
          </p>
          <div class="mt-2 text-sm font-medium text-slate-700">
            → Implement supplier shelf life guarantees in contracts; add receiving quality checks at DC
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Supplier Breakdown (Top Suppliers) -->
  <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
    <div class="p-5 border-b border-slate-100">
      <h2 class="text-lg font-semibold text-slate-800">Top Suppliers — Packaged Salads</h2>
      <p class="text-sm text-slate-500">Ranked by volume · Showing quality metrics</p>
    </div>
    
    <table class="w-full">
      <thead>
        <tr class="bg-slate-50 border-b border-slate-100 text-xs font-medium text-slate-400 uppercase tracking-wide">
          <th class="text-left py-3 px-4">Supplier</th>
          <th class="text-center py-3 px-3">Volume Share</th>
          <th class="text-center py-3 px-3">Shelf Life (Mean)</th>
          <th class="text-center py-3 px-3">Shelf Life (CV)</th>
          <th class="text-center py-3 px-3">% Below 5d</th>
          <th class="text-center py-3 px-3">Fill Rate</th>
          <th class="text-center py-3 px-3">Status</th>
        </tr>
      </thead>
      <tbody id="supplierTable">
        <!-- Populated by JS -->
      </tbody>
    </table>
  </div>

  <div class="mt-6 text-center text-xs text-slate-400">
    Fresh Analytics · Food Waste Lab · Confidential
  </div>

  <script>
    // Regional Data
    const regionData = [
      { name: 'Southeast', stores: 18, shelfLife: 4.2, shelfLifeCV: 0.38, pctBelowShelfLife: 35, fillRate: 92.1, pctBelowFill: 12, risk: 'critical' },
      { name: 'Florida', stores: 12, shelfLife: 4.8, shelfLifeCV: 0.32, pctBelowShelfLife: 28, fillRate: 91.8, pctBelowFill: 14, risk: 'critical' },
      { name: 'Southwest', stores: 14, shelfLife: 5.4, shelfLifeCV: 0.26, pctBelowShelfLife: 21, fillRate: 93.2, pctBelowFill: 18, risk: 'high' },
      { name: 'Texas', stores: 16, shelfLife: 5.6, shelfLifeCV: 0.24, pctBelowShelfLife: 18, fillRate: 94.5, pctBelowFill: 9, risk: 'high' },
      { name: 'Mid-Atlantic', stores: 14, shelfLife: 5.9, shelfLifeCV: 0.22, pctBelowShelfLife: 15, fillRate: 95.2, pctBelowFill: 6, risk: 'medium' },
      { name: 'Midwest', stores: 15, shelfLife: 6.1, shelfLifeCV: 0.21, pctBelowShelfLife: 12, fillRate: 94.8, pctBelowFill: 7, risk: 'medium' },
      { name: 'Northeast', stores: 11, shelfLife: 6.4, shelfLifeCV: 0.19, pctBelowShelfLife: 9, fillRate: 96.1, pctBelowFill: 4, risk: 'medium' },
      { name: 'Great Lakes', stores: 10, shelfLife: 6.6, shelfLifeCV: 0.20, pctBelowShelfLife: 8, fillRate: 95.8, pctBelowFill: 5, risk: 'low' },
      { name: 'Mountain', stores: 8, shelfLife: 7.1, shelfLifeCV: 0.18, pctBelowShelfLife: 5, fillRate: 96.4, pctBelowFill: 3, risk: 'low' },
      { name: 'Pacific Northwest', stores: 9, shelfLife: 7.4, shelfLifeCV: 0.16, pctBelowShelfLife: 3, fillRate: 97.2, pctBelowFill: 2, risk: 'low' },
    ];

    // Supplier Data
    const supplierData = [
      { name: 'Fresh Express', share: 32, shelfLife: 5.6, cv: 0.28, pctBelow: 19, fillRate: 94.2, status: 'review' },
      { name: 'Dole Fresh Vegetables', share: 24, shelfLife: 6.2, cv: 0.22, pctBelow: 12, fillRate: 95.8, status: 'acceptable' },
      { name: 'Taylor Farms', share: 18, shelfLife: 6.8, cv: 0.18, pctBelow: 7, fillRate: 96.5, status: 'preferred' },
      { name: 'Earthbound Farm', share: 12, shelfLife: 5.9, cv: 0.25, pctBelow: 16, fillRate: 93.8, status: 'review' },
      { name: 'Ready Pac Foods', share: 8, shelfLife: 5.4, cv: 0.31, pctBelow: 22, fillRate: 92.4, status: 'probation' },
      { name: 'Other / Regional', share: 6, shelfLife: 4.8, cv: 0.35, pctBelow: 28, fillRate: 91.2, status: 'probation' },
    ];

    // Shelf Life Distribution Data
    const shelfLifeDist = [
      { label: '≤3 days', pct: 6, color: 'bg-red-600' },
      { label: '4 days', pct: 12, color: 'bg-red-400' },
      { label: '5 days', pct: 16, color: 'bg-amber-400' },
      { label: '6 days', pct: 18, color: 'bg-amber-300' },
      { label: '7 days', pct: 22, color: 'bg-green-400' },
      { label: '8+ days', pct: 26, color: 'bg-green-500' },
    ];

    // Fill Rate Distribution Data
    const fillRateDist = [
      { label: '<85%', pct: 3, color: 'bg-red-600' },
      { label: '85-89%', pct: 5, color: 'bg-red-400' },
      { label: '90-94%', pct: 12, color: 'bg-amber-400' },
      { label: '95-96%', pct: 10, color: 'bg-amber-300' },
      { label: '97-99%', pct: 35, color: 'bg-green-400' },
      { label: '100%', pct: 35, color: 'bg-green-500' },
    ];

    // Render Region Table
    function renderRegionTable() {
      const tbody = document.getElementById('regionTable');
      tbody.innerHTML = '';

      regionData.forEach(region => {
        const row = document.createElement('tr');
        row.className = 'border-b border-slate-50 hover:bg-slate-50';
        
        const riskColors = {
          critical: 'bg-red-100 text-red-700',
          high: 'bg-amber-100 text-amber-700',
          medium: 'bg-yellow-100 text-yellow-700',
          low: 'bg-green-100 text-green-700'
        };

        row.innerHTML = `
          <td class="py-3 px-4">
            <div class="font-medium text-slate-700">${region.name}</div>
            <div class="text-xs text-slate-400">${region.stores} stores</div>
          </td>
          
          <!-- Shelf Life Mean -->
          <td class="py-3 px-3 text-center border-l border-slate-100">
            <span class="font-semibold ${region.shelfLife < 5 ? 'text-red-600' : region.shelfLife < 7 ? 'text-amber-600' : 'text-slate-800'}">
              ${region.shelfLife} days
            </span>
          </td>
          
          <!-- Shelf Life CV -->
          <td class="py-3 px-3 text-center">
            <span class="font-medium ${region.shelfLifeCV > 0.25 ? 'text-red-600' : region.shelfLifeCV > 0.15 ? 'text-amber-600' : 'text-slate-600'}">
              ${region.shelfLifeCV.toFixed(2)}
            </span>
          </td>
          
          <!-- % Below 5 days -->
          <td class="py-3 px-3 text-center">
            <div class="flex items-center justify-center gap-2">
              <div class="w-16 h-2 bg-slate-100 rounded-full overflow-hidden">
                <div class="h-full ${region.pctBelowShelfLife > 20 ? 'bg-red-500' : region.pctBelowShelfLife > 10 ? 'bg-amber-500' : 'bg-green-500'} rounded-full" style="width: ${region.pctBelowShelfLife}%"></div>
              </div>
              <span class="text-sm font-medium ${region.pctBelowShelfLife > 20 ? 'text-red-600' : region.pctBelowShelfLife > 10 ? 'text-amber-600' : 'text-slate-600'}">
                ${region.pctBelowShelfLife}%
              </span>
            </div>
          </td>
          
          <!-- Fill Rate Mean -->
          <td class="py-3 px-3 text-center border-l border-slate-100">
            <span class="font-semibold ${region.fillRate < 90 ? 'text-red-600' : region.fillRate < 97 ? 'text-amber-600' : 'text-slate-800'}">
              ${region.fillRate}%
            </span>
          </td>
          
          <!-- % Below 90% -->
          <td class="py-3 px-3 text-center">
            <div class="flex items-center justify-center gap-2">
              <div class="w-16 h-2 bg-slate-100 rounded-full overflow-hidden">
                <div class="h-full ${region.pctBelowFill > 10 ? 'bg-red-500' : region.pctBelowFill > 5 ? 'bg-amber-500' : 'bg-green-500'} rounded-full" style="width: ${Math.min(region.pctBelowFill * 3, 100)}%"></div>
              </div>
              <span class="text-sm font-medium ${region.pctBelowFill > 10 ? 'text-red-600' : region.pctBelowFill > 5 ? 'text-amber-600' : 'text-slate-600'}">
                ${region.pctBelowFill}%
              </span>
            </div>
          </td>
          
          <!-- Risk Score -->
          <td class="py-3 px-3 text-center border-l border-slate-100">
            <span class="inline-flex px-2 py-1 rounded-full text-xs font-medium ${riskColors[region.risk]}">
              ${region.risk.charAt(0).toUpperCase() + region.risk.slice(1)}
            </span>
          </td>
        `;
        
        tbody.appendChild(row);
      });
    }

    // Render Distribution Charts
    function renderDistributions() {
      // Shelf Life
      const shelfLifeContainer = document.getElementById('shelfLifeDistribution');
      shelfLifeContainer.innerHTML = shelfLifeDist.map(item => `
        <div class="flex items-center gap-3">
          <div class="w-16 text-xs text-slate-500 text-right">${item.label}</div>
          <div class="flex-1 h-5 bg-slate-100 rounded overflow-hidden">
            <div class="h-full ${item.color} rounded" style="width: ${item.pct}%"></div>
          </div>
          <div class="w-10 text-xs text-slate-600 font-medium">${item.pct}%</div>
        </div>
      `).join('');

      // Fill Rate
      const fillRateContainer = document.getElementById('fillRateDistribution');
      fillRateContainer.innerHTML = fillRateDist.map(item => `
        <div class="flex items-center gap-3">
          <div class="w-16 text-xs text-slate-500 text-right">${item.label}</div>
          <div class="flex-1 h-5 bg-slate-100 rounded overflow-hidden">
            <div class="h-full ${item.color} rounded" style="width: ${item.pct}%"></div>
          </div>
          <div class="w-10 text-xs text-slate-600 font-medium">${item.pct}%</div>
        </div>
      `).join('');
    }

    // Render Supplier Table
    function renderSupplierTable() {
      const tbody = document.getElementById('supplierTable');
      tbody.innerHTML = '';

      const statusColors = {
        preferred: 'bg-green-100 text-green-700',
        acceptable: 'bg-blue-100 text-blue-700',
        review: 'bg-amber-100 text-amber-700',
        probation: 'bg-red-100 text-red-700'
      };

      supplierData.forEach(supplier => {
        const row = document.createElement('tr');
        row.className = 'border-b border-slate-50 hover:bg-slate-50';
        
        row.innerHTML = `
          <td class="py-3 px-4 font-medium text-slate-700">${supplier.name}</td>
          <td class="py-3 px-3 text-center text-slate-600">${supplier.share}%</td>
          <td class="py-3 px-3 text-center">
            <span class="font-semibold ${supplier.shelfLife < 5 ? 'text-red-600' : supplier.shelfLife < 7 ? 'text-amber-600' : 'text-slate-800'}">
              ${supplier.shelfLife} days
            </span>
          </td>
          <td class="py-3 px-3 text-center">
            <span class="${supplier.cv > 0.25 ? 'text-red-600' : supplier.cv > 0.15 ? 'text-amber-600' : 'text-slate-600'}">
              ${supplier.cv.toFixed(2)}
            </span>
          </td>
          <td class="py-3 px-3 text-center">
            <span class="font-medium ${supplier.pctBelow > 15 ? 'text-red-600' : supplier.pctBelow > 8 ? 'text-amber-600' : 'text-slate-600'}">
              ${supplier.pctBelow}%
            </span>
          </td>
          <td class="py-3 px-3 text-center">
            <span class="font-semibold ${supplier.fillRate < 93 ? 'text-red-600' : supplier.fillRate < 97 ? 'text-amber-600' : 'text-slate-800'}">
              ${supplier.fillRate}%
            </span>
          </td>
          <td class="py-3 px-3 text-center">
            <span class="inline-flex px-2 py-1 rounded-full text-xs font-medium ${statusColors[supplier.status]}">
              ${supplier.status.charAt(0).toUpperCase() + supplier.status.slice(1)}
            </span>
          </td>
        `;
        
        tbody.appendChild(row);
      });
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      renderRegionTable();
      renderDistributions();
      renderSupplierTable();
    });
  </script>

</body>
</html>
